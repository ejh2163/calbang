{% extends 'index.html' %}

{% block content %}
<hr>
<div class="row">
    <!-- START filters -->
    <div class="col-xs-24">
        <form class="row">
            <div class="filter-select col-xs-24 col-sm-9">
                가격
                <p style="font-size:15px; text-align:center; margin-top:-12px;">
                    <input type="text" id="rangemin" name="price-min" readonly style="border:0; width:30%; text-align:right;"> ~ 
                    <input type="text" id="rangemax" name="price-max" readonly style="border:0; width:30%;">
                </p>
                <div id="rangeslider"></div>
            </div>
            <div class="filter-select col-xs-6 col-sm-3">
                방
                <select name="beds" class="form-control form-control-select">
                    <option value="0">0+</option>
                    <option value="1">1+</option>
                    <option value="2">2+</option>
                    <option value="3">3+</option>
                    <option value="4">4+</option>
                </select>
            </div>
            <div class="filter-select col-xs-6 col-sm-3">
                화
                <select name="baths" class="form-control form-control-select">
                    <option value="1">0+</option>
                    <option value="1">1+</option>
                    <option value="2">2+</option>
                    <option value="3">3+</option>
                    <option value="4">4+</option>
                </select>
            </div>
            <div class="filter-select col-xs-12 col-sm-6">
                지역
                <select name="city" class="form-control form-control-select">
                    <option value="all">전체</option>
                    {% for city in cities: %}
                        <option value="{{city.city}}">{{ city.city }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="filter-select col-xs-24 col-sm-3">
                <br>
                <input class="form-control btn btn-filter" type="submit" value="검색">
            </div>
        </form><!-- END class filters row -->
        <hr>
    </div><!-- END class grid -->

    <!-- START cards -->
    {% for post in posts: %}
    <div class="col-xs-12 col-sm-6">
        <div class="card fade-in">
            <div class="card-viewed">
                <i class="fa fa-eye" aria-hidden="true"></i>&nbsp{{ post.viewed }}
            </div>
            <a class="card-img" href="/{{ page }}/view/{{ post.id }}">
                {% if post.image_ext: %}
                    <img src="{{ post.image_ext }}" />
                {% else %}
                    <img src="{{ url_for('static', filename='images/no-photo.png') }}" />
                {% endif %}
            </a>
            <div class="card-content">
                <p class="card-subject ellipsis">
                    <a href="/{{ page }}/view/{{ post.id }}">{{ post.subject }}</a>
                </p>
                <p class="card-body-1 ellipsis">
                    {% if post.bedrooms!='studio' %} 방 {% endif %} {{ post.bedrooms.capitalize() }} • 
                    화 {{ post.bathrooms }} •
                    {% if post.parking==None: %} 주차 -- {% else: %} 주차 {{ post.parking }} {% endif %}
                </p>
                <p class="card-body-2 ellipsis">
                    {{ '${:,}'.format(post.price) }}
                    <span class="card-body-3">{% if page=='realestate': %} {{ '{:,} sqft.'.format(post.sqft) }} {% endif %} {{ price_suffix }}</span>
                </p>
            </div>
            <div class="card-read-more ellipsis">
                <p class="card-read-more-text" style="float:left;"><i class="fa fa-map-marker" aria-hidden="true"></i> {{ post.city }}</p>
                <p class="card-read-more-text" style="float:right;">{{ (today.date()-post.date_posted.date()).days }}일전</p>
            </div>
        </div><!-- END class card -->
    </div><!-- END class grid -->
    {% endfor %}
</div><!-- END class row -->

<div class="row">
    <br />
    <div class="col-xs-24 col-sm-offset-21 col-sm-3">
        <a href="/{{ page }}/edit"><button type="button" class="btn btn-to-edit">등록하기</button></a>
    </div>
    <div class="pagination-centered">
        <ul class="pagination">
            {% for num in range(1, 6): %}
                <li {% if page_num==num %}class="active"{% endif %}>
                    <a href="/{{ page }}/{{ num }}">{{ num }}</a>
                </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}